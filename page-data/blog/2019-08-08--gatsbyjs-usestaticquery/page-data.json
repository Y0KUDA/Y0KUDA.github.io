{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/blog/2019-08-08--gatsbyjs-usestaticquery/","webpackCompilationHash":"3260c78ebe20b93e00a2","result":{"data":{"site":{"siteMetadata":{"siteUrl":"https://unearned-in.com","disqus":"gatsby-typescript"}},"post":{"html":"<h1 id=\"経緯\"><a href=\"#%E7%B5%8C%E7%B7%AF\" aria-label=\"経緯 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>経緯</h1>\n<p>私のブログの右側に表示しているこれ<br>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 327px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/19e3aae741b0dba9843a172de9796b76/0bb3d/card.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 152.5993883792049%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"card\"\n        title=\"card\"\n        src=\"/static/19e3aae741b0dba9843a172de9796b76/0bb3d/card.png\"\n        srcset=\"/static/19e3aae741b0dba9843a172de9796b76/acf4b/card.png 173w,\n/static/19e3aae741b0dba9843a172de9796b76/0bb3d/card.png 327w\"\n        sizes=\"(max-width: 327px) 100vw, 327px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br>\n実装としては表示時にメッセージや名前、各種リンクを外部からパラメータとして与えることができるようになっている。<br>\nつまり、graphqlから持ってきた情報をパラメータとして一つずつコンポーネントに渡す必要がある。<br>\n自分以外のカードを表示することなんてないし固定の情報を表示する静的なコンポーネントにしたかった。</p>\n<h1 id=\"解決方法\"><a href=\"#%E8%A7%A3%E6%B1%BA%E6%96%B9%E6%B3%95\" aria-label=\"解決方法 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>解決方法</h1>\n<p><code class=\"language-text\">useStaticQuery</code>を使うことで、graphqlを使って情報にアクセスすることができる。</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Link<span class=\"token punctuation\">,</span> useStaticQuery<span class=\"token punctuation\">,</span> graphql <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"gatsby\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">////////////////////////////////////////////</span>\n<span class=\"token comment\">////////////////////////////////////////////</span>\n<span class=\"token comment\">////////////////////////////////////////////</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">MyCard</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token function\">useStaticQuery</span><span class=\"token punctuation\">(</span>graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n    query MyCardQuery {\n      authorJson {\n        atcoder\n        bio\n        email\n        github\n        id\n        kaggle\n        lapras\n        npm\n        qiita\n        twitter\n        vsmarket\n        teratail\n        avatar {\n          children {\n            ... on ImageSharp {\n              fixed(width: 150, height: 150, quality: 100) {\n                src\n                srcSet\n              }\n            }\n          }\n        }\n      }\n    }\n  </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> avatar <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span>authorJson<span class=\"token punctuation\">.</span>avatar<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>MyCardProp\n      avatar<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>avatar<span class=\"token punctuation\">.</span>fixed<span class=\"token punctuation\">.</span>srcSet<span class=\"token punctuation\">}</span>\n      id<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">.</span>authorJson<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span>\n      bio<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">.</span>authorJson<span class=\"token punctuation\">.</span>bio<span class=\"token punctuation\">}</span>\n      email<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">.</span>authorJson<span class=\"token punctuation\">.</span>email<span class=\"token punctuation\">}</span>\n      twitter<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">.</span>authorJson<span class=\"token punctuation\">.</span>twitter<span class=\"token punctuation\">}</span>\n      github<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">.</span>authorJson<span class=\"token punctuation\">.</span>github<span class=\"token punctuation\">}</span>\n      qiita<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">.</span>authorJson<span class=\"token punctuation\">.</span>qiita<span class=\"token punctuation\">}</span>\n      atcoder<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">.</span>authorJson<span class=\"token punctuation\">.</span>atcoder<span class=\"token punctuation\">}</span>\n      kaggle<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">.</span>authorJson<span class=\"token punctuation\">.</span>kaggle<span class=\"token punctuation\">}</span>\n      lapras<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">.</span>authorJson<span class=\"token punctuation\">.</span>lapras<span class=\"token punctuation\">}</span>\n      vsmarket<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">.</span>authorJson<span class=\"token punctuation\">.</span>vsmarket<span class=\"token punctuation\">}</span>\n      npm<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">.</span>authorJson<span class=\"token punctuation\">.</span>npm<span class=\"token punctuation\">}</span>\n      teratail<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">.</span>authorJson<span class=\"token punctuation\">.</span>teratail<span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>","excerpt":"経緯 私のブログの右側に表示しているこれ  実装としては表示時にメッセージや名前、各種リンクを外部からパラメータとして与えることができるようになっている。 つまり、graphql…","tableOfContents":"<ul>\n<li><a href=\"/blog/2019-08-08--gatsbyjs-usestaticquery/#%E7%B5%8C%E7%B7%AF\">経緯</a></li>\n<li><a href=\"/blog/2019-08-08--gatsbyjs-usestaticquery/#%E8%A7%A3%E6%B1%BA%E6%96%B9%E6%B3%95\">解決方法</a></li>\n</ul>","timeToRead":2,"fields":{"slug":"/blog/2019-08-08--gatsbyjs-usestaticquery/"},"frontmatter":{"tags":["gatsby","react","開発"],"author":{"id":"ykd","bio":"意識高い系イキリプログラマです。<br/>もしくは虚業家です。<br/>ネットに本名晒したくないのでYKDという名前でやってます。<br/>低学歴のくせにイキリ散らす害悪です。すいません。<br/>最近はFXにハマってます。FXは通貨の価値を決める尊いお仕事です。<br/>トレーダーはポエムばっか呟いてないでエントリー報告とポジション晒せ。<br/>8月+100万円<br/>9月+50万円","twitter":"https://twitter.com/Y0KUDA","email":"ykd.engineer@gmail.com","github":"https://github.com/Y0KUDA","qiita":"https://qiita.com/Y0KUDA","atcoder":"https://atcoder.jp/users/yokuda","kaggle":"https://www.kaggle.com/y0kuda","lapras":"https://lapras.com/public/ASZLKRT","vsmarket":"https://marketplace.visualstudio.com/publishers/Y0KUDA","npm":"https://www.npmjs.com/~yokuda","avatar":{"children":[{"__typename":"ImageSharp","fixed":{"src":"/static/542a2ccff1837c41066cd2e2fd803b23/77745/nyan.jpg","srcSet":"/static/542a2ccff1837c41066cd2e2fd803b23/77745/nyan.jpg 1x,\n/static/542a2ccff1837c41066cd2e2fd803b23/a6129/nyan.jpg 1.5x,\n/static/542a2ccff1837c41066cd2e2fd803b23/2ea83/nyan.jpg 2x"}}]}},"title":"【gatsbyjs】普通のコンポーネント内でgraphqlを使う方法","updatedDate":"Aug 8, 2019","description":"useStaticQuery使うと、普通のコンポーネント内でもgraphqlが使える","image":{"children":[{"__typename":"ImageSharp","fixed":{"src":"/static/d989ec3d70e4182500695075b78d3a8a/887a2/gatsby.jpg","srcSet":"/static/d989ec3d70e4182500695075b78d3a8a/887a2/gatsby.jpg 1x,\n/static/d989ec3d70e4182500695075b78d3a8a/f8399/gatsby.jpg 1.5x,\n/static/d989ec3d70e4182500695075b78d3a8a/d3f45/gatsby.jpg 2x"}}]}}},"recents":{"edges":[{"node":{"fields":{"slug":"/blog/2019-10-13--okuribit-roadmap/"},"timeToRead":2,"frontmatter":{"title":"億り人ロードマップ","image":{"children":[{"__typename":"ImageSharp","fixed":{"src":"/static/4840c196e6dad3d39579281e31d472eb/37089/money.jpg","srcSet":"/static/4840c196e6dad3d39579281e31d472eb/37089/money.jpg 1x,\n/static/4840c196e6dad3d39579281e31d472eb/4a855/money.jpg 1.5x,\n/static/4840c196e6dad3d39579281e31d472eb/92aae/money.jpg 2x"}}]},"author":{"id":"ykd","avatar":{"children":[{"__typename":"ImageSharp","fixed":{"src":"/static/542a2ccff1837c41066cd2e2fd803b23/29d9a/nyan.jpg","srcSet":"/static/542a2ccff1837c41066cd2e2fd803b23/29d9a/nyan.jpg 1x,\n/static/542a2ccff1837c41066cd2e2fd803b23/1a035/nyan.jpg 1.5x,\n/static/542a2ccff1837c41066cd2e2fd803b23/74d54/nyan.jpg 2x"}}]}}}}},{"node":{"fields":{"slug":"/blog/2019-09-30--job-fired/"},"timeToRead":15,"frontmatter":{"title":"【新卒二年目】転職してみた -退職編-【退職勧奨RTA】","image":{"children":[{"__typename":"ImageSharp","fixed":{"src":"/static/5b2e918b8f3a2b1295eadadad743fd4c/37089/jobchange.jpg","srcSet":"/static/5b2e918b8f3a2b1295eadadad743fd4c/37089/jobchange.jpg 1x,\n/static/5b2e918b8f3a2b1295eadadad743fd4c/4a855/jobchange.jpg 1.5x,\n/static/5b2e918b8f3a2b1295eadadad743fd4c/92aae/jobchange.jpg 2x"}}]},"author":{"id":"ykd","avatar":{"children":[{"__typename":"ImageSharp","fixed":{"src":"/static/542a2ccff1837c41066cd2e2fd803b23/29d9a/nyan.jpg","srcSet":"/static/542a2ccff1837c41066cd2e2fd803b23/29d9a/nyan.jpg 1x,\n/static/542a2ccff1837c41066cd2e2fd803b23/1a035/nyan.jpg 1.5x,\n/static/542a2ccff1837c41066cd2e2fd803b23/74d54/nyan.jpg 2x"}}]}}}}},{"node":{"fields":{"slug":"/blog/2019-09-30--job-finding/"},"timeToRead":55,"frontmatter":{"title":"【新卒二年目】転職してみた  -職探し編-【エントリー100社以上】","image":{"children":[{"__typename":"ImageSharp","fixed":{"src":"/static/5b2e918b8f3a2b1295eadadad743fd4c/37089/jobchange.jpg","srcSet":"/static/5b2e918b8f3a2b1295eadadad743fd4c/37089/jobchange.jpg 1x,\n/static/5b2e918b8f3a2b1295eadadad743fd4c/4a855/jobchange.jpg 1.5x,\n/static/5b2e918b8f3a2b1295eadadad743fd4c/92aae/jobchange.jpg 2x"}}]},"author":{"id":"ykd","avatar":{"children":[{"__typename":"ImageSharp","fixed":{"src":"/static/542a2ccff1837c41066cd2e2fd803b23/29d9a/nyan.jpg","srcSet":"/static/542a2ccff1837c41066cd2e2fd803b23/29d9a/nyan.jpg 1x,\n/static/542a2ccff1837c41066cd2e2fd803b23/1a035/nyan.jpg 1.5x,\n/static/542a2ccff1837c41066cd2e2fd803b23/74d54/nyan.jpg 2x"}}]}}}}},{"node":{"fields":{"slug":"/blog/2019-09-30--job-neet/"},"timeToRead":16,"frontmatter":{"title":"【無職の収入】転職してみた -ニート生活編-【FX沼】","image":{"children":[{"__typename":"ImageSharp","fixed":{"src":"/static/5b2e918b8f3a2b1295eadadad743fd4c/37089/jobchange.jpg","srcSet":"/static/5b2e918b8f3a2b1295eadadad743fd4c/37089/jobchange.jpg 1x,\n/static/5b2e918b8f3a2b1295eadadad743fd4c/4a855/jobchange.jpg 1.5x,\n/static/5b2e918b8f3a2b1295eadadad743fd4c/92aae/jobchange.jpg 2x"}}]},"author":{"id":"ykd","avatar":{"children":[{"__typename":"ImageSharp","fixed":{"src":"/static/542a2ccff1837c41066cd2e2fd803b23/29d9a/nyan.jpg","srcSet":"/static/542a2ccff1837c41066cd2e2fd803b23/29d9a/nyan.jpg 1x,\n/static/542a2ccff1837c41066cd2e2fd803b23/1a035/nyan.jpg 1.5x,\n/static/542a2ccff1837c41066cd2e2fd803b23/74d54/nyan.jpg 2x"}}]}}}}}]}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/blog/2019-08-08--gatsbyjs-usestaticquery/"}}}